(function(){define(["utilities/global","controllers/application"],function(){var e=window.LSP.utilities,t=function(){var t={},n=window.LSP,r=n.models.api,i={validationInputs:'*[class*="validation-"]:input:not([disabled])'},s={required:{defaultMessage:"This field is required",pattern:/^.+/},alphaOnly:{defaultMessage:"Letters only",pattern:/^[A-Za-z]*$/},numericOnly:{defaultMessage:"Numbers only",pattern:/^[0-9]*$/},alphaNumeric:{defaultMessage:"Numbers, letters, and spaces only",pattern:/[A-Za-z ]*/},emailAddress:{defaultMessage:"This dosen't look like an email address",pattern:/^[a-zA-Z0-9_\-\.]{2,}@[a-zA-Z0-9_\-\.]{2,}\.[a-zA-Z]{2,}$/},creditCardNumber:{defaultMessage:"Invalid credit card number",pattern:/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\d{3})\d{11})$/}};return t={name:"validation",events:{application:{onAttachEvents:function(e,n){$(i.validationInputs,n.selector).each(function(e,n){$(n).off("validation").on("keyup.lsp.validation",function(e){return e.which!==9&&e.which!==16&&e.which!==13&&t.validate(n),!0})}),$("form",n.selector).off("validation").on("submit.lsp.validation",function(e){var n=t.validateForm($(this));return n?($(this).triggerHandler("afterValidation"),!0):(e.preventDefault(),!1)})}}},assets:{},getValidationMessage:function(e,t){var n=$(e).data("validation-message-"+t),r=s[t].defaultMessage;return n?n:r},getPattern:function(e){if(!s[e])throw new Error(e+" is an invalid validation type");return s[e]},isValid:function(e,n){return t.getPattern(n).pattern.test(e)},validateForm:function(n){var r=!1,s,o=$(i.validationInputs,n);for(var u=0;u<o.length;u++)if(!t.validate(o[u])){r=!0,s=o[u];break}return r===!0&&e.scrollTo(s),!r},isValidForm:function(e){var n=$(i.validationInputs,e);for(var r=0;r<n.length;r++)if(!t.validate(n[r]))return!1;return!0},validate:function(e){$(e).removeClass("validation-valid","validation-invalid");var n=$(e).prop("type")=="radio"?$("input[name="+$(e).prop("name")+"]:checked").val()||"":$(e).val();console.log(n);var r=t.parseInvalid(n,$(e).attr("class").split(/\s+/));return r.length>0?(t.displayInvalid(e,r),!1):(t.displayValid(e),!0)},parseInvalid:function(e,n){var r=[];for(var i=0;i<n.length;i++)if(n[i].indexOf("validation-")>-1&&n[i]!=="validation-valid"&&n[i]!=="validation-invalid"){var s=n[i].replace("validation-",""),o=t.getPattern(s);!e.match(o.pattern)&&(e!==""&&s!=="required"||s==="required")&&r.push(s)}return r},displayInvalid:function(e,t){var n=$(e).parent(".validation-container");if(!n.length)var n=$(e).parent().addClass("validation-container");n.attr("data-validation-invalidTypes",t.join(" "))},displayValid:function(e){$(e).parent(".validation-container").removeAttr("data-validation-invalidTypes")}},t}();e.register("controller","validation",t)})})();